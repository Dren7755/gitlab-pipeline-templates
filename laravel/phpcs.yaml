variables:
  LINT_DIRS: "app/code src" # Separate multiple dirs with spaces

'Codestyle':
  stage: static
  image: composer
  allow_failure: true
  before_script: []
  only:
    changes:
      - "*.php"
      - "**/*.php"
  script:
    - composer create-project doctrine/coding-standard /tmp/cs
    - mkdir -p reports/phpcs
    - php /tmp/cs/vendor/bin/phpcs --standard=Doctrine --report=full --report=reports/phpcs/ --no-cache $LINT_DIRS
  artifacts:
    paths:
      - reports
    expire_in: 30m
